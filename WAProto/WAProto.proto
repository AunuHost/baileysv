syntax = "proto2";
package proto;

message ADVEncryptionKey {
	optional bytes keyId = 1;
	optional bytes keyType = 2;
	optional bytes keyData = 3;
}

message ADVKeyIndexList {
	optional uint32 rawId = 1;
	optional uint64 timestamp = 2;
	optional uint32 currentIndex = 3;
	repeated uint32 validIndexes = 4 [packed = true];
}

message ADVSignedKeyIndexList {
	optional bytes details = 1;
	optional bytes signature = 2;
}

message ADVSignedDeviceIdentity {
	optional bytes details = 1;
	optional bytes accountSignature = 2;
	optional bytes deviceSignature = 3;
}

message ADVSignedDeviceIdentityHMAC {
	optional bytes details = 1;
	optional bytes hmac = 2;
}

message ADVDeviceIdentity {
	optional uint32 rawId = 1;
	optional uint64 timestamp = 2;
	optional uint32 keyIndex = 3;
}

message Message {
	optional string conversation = 1;
	optional SenderKeyDistributionMessage senderKeyDistributionMessage = 2;
	optional ImageMessage imageMessage = 3;
	optional ContactMessage contactMessage = 4;
	optional LocationMessage locationMessage = 5;
	optional ExtendedTextMessage extendedTextMessage = 6;
	optional DocumentMessage documentMessage = 7;
	optional AudioMessage audioMessage = 8;
	optional VideoMessage videoMessage = 9;
	optional Call call = 10;
	optional Chat chat = 11;
	optional ProtocolMessage protocolMessage = 12;
	optional ContactsArrayMessage contactsArrayMessage = 13;
	optional HighlyStructuredMessage highlyStructuredMessage = 14;
	optional FastRatchetKeySenderKeyDistributionMessage fastRatchetKeySenderKeyDistributionMessage = 15;
	optional SendPaymentMessage sendPaymentMessage = 16;
	optional LiveLocationMessage liveLocationMessage = 17;
	optional RequestPaymentMessage requestPaymentMessage = 18;
	optional DeclinePaymentRequestMessage declinePaymentRequestMessage = 19;
	optional CancelPaymentRequestMessage cancelPaymentRequestMessage = 20;
	optional TemplateMessage templateMessage = 25;
	optional TemplateButtonReplyMessage templateButtonReplyMessage = 26;
	optional ButtonsMessage buttonsMessage = 42;
	optional ButtonsResponseMessage buttonsResponseMessage = 43;
	optional ListMessage listMessage = 44;
	optional ListResponseMessage listResponseMessage = 45;
	optional GroupInviteMessage groupInviteMessage = 46;
	optional ReactionMessage reactionMessage = 51;
	optional PollCreationMessage pollCreationMessage = 52;
	optional PollUpdateMessage pollUpdateMessage = 53;
}

message WebMessageInfo {
	required MessageKey key = 1;
	optional Message message = 2;
	optional uint64 messageTimestamp = 3;
	enum Status {
		ERROR = 0;
		PENDING = 1;
		SERVER_ACK = 2;
		DELIVERED = 3;
		READ = 4;
		PLAYED = 5;
	}
	optional Status status = 4;
	optional string participant = 5;
	optional uint64 messageC2STimestamp = 6;
	optional bool ignore = 16;
	optional bool starred = 17;
	optional bool broadcast = 18;
	optional string pushName = 19;
	optional bytes mediaCiphertextSha256 = 20;
	optional bool multicast = 21;
	optional bool urlFullTitle = 22;
	optional bool urlText = 23;
	optional bytes messageStubParameters = 24;
	optional uint32 duration = 25;
	repeated string labels = 26;
	optional PaymentInfo paymentInfo = 27;
	optional LiveLocationMessage finalLiveLocation = 28;
	optional PaymentInfo quotedPaymentInfo = 29;
	optional uint64 ephemeralStartTimestamp = 30;
	optional uint32 ephemeralDuration = 31;
}
